<!DOCTYPE html>
<html>
<head>
    <title>Google Maps Route Display</title>
    <style>
        /* 设置地图和 body 的样式 */
        html, body {
            height: 100%;
            margin: 0;
            padding: 0;
        }
        #map {
            height: 100vh; /* 使地图高度为视口高度的 100% */
            width: 100vw;  /* 使地图宽度为视口宽度的 100% */
        }
         /* 设置按钮样式 */
         #navButton {
            position: fixed;
            bottom: 20px;
            right: 20px;
            background-color: #007bff;
            color: white;
            padding: 10px 20px;
            border: none;
            border-radius: 5px;
            font-size: 16px;
            cursor: pointer;
            text-decoration: none;
            z-index: 1000; /* 确保按钮在页面上层 */
        }
        #navButton:hover {
            background-color: #0056b3;
        }
    </style>
    <script src="https://maps.googleapis.com/maps/api/js?key=AIzaSyAvT2xObdu5cvGrAxUcJz3cIHcYq0sPdvU"></script>
    <script>
        function initMap() {
            // 创建地图
            var map = new google.maps.Map(document.getElementById('map'), {
                zoom: 12,
                center: { lat: 33.5904, lng: 130.4017 } // Fukuoka center
            });

            // Directions Service 和 Directions Renderer 用于处理和展示路线
            var directionsService = new google.maps.DirectionsService();
            var directionsRenderer = new google.maps.DirectionsRenderer();
            directionsRenderer.setMap(map);

            // 定义路线请求
            var request = {
                origin: '2 Chome-17-20 Befu, Shime, Kasuya District, Fukuoka 811-2205',
                destination: '2 Chome-17-20 Befu, Shime, Kasuya District, Fukuoka 811-2205',
                waypoints: [
                    
                    { location: '福岡市博多区 竹下1-15-40', stopover: true },
                    { location: '糟屋郡志免町 南里2-20-13', stopover: true },
                    { location: '福岡市中央区 舞鶴1-5-9', stopover: true },
                    { location: '福岡市博多区 東平尾1-5-13', stopover: true },
                    { location: '福岡市博多区 上牟田3-8-3', stopover: true },
                    
                ],
                travelMode: 'DRIVING',
                optimizeWaypoints: true // 自动优化路线
            };

            // 计算并展示路线
            directionsService.route(request, function(response, status) {
                if (status === 'OK') {
                    directionsRenderer.setDirections(response);

                    // 生成 Google Maps 导航链接
                    var optimizedRoute = response.routes[0];
                    var routeURL = 'https://www.google.com/maps/dir/?api=1';
                    routeURL += '&origin=' + encodeURIComponent(request.origin);
                    routeURL += '&destination=' + encodeURIComponent(request.destination);
                    routeURL += '&waypoints=' + encodeURIComponent(optimizedRoute.legs.map(leg => leg.end_location).join('|'));

                    // 更新链接
                    document.getElementById('navButton').href = routeURL;
                } else {
                    console.error('Directions request failed due to ' + status);
                }
            });
        }
    </script>
</head>
<body onload="initMap()">
    <div id="map"></div>
    <a id="navButton" href="#" target="_blank">点击这里在 Google Maps 中导航</a>
</body>
</html>
